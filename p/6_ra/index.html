<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Do a web research about the various methods proposed to compute the running median"><title>6_RA</title><link rel=canonical href=https://www.matteobianchi.eu/p/6_ra/><link rel=stylesheet href=/scss/style.min.fe253589db5a54c99fe6b16bfbaf0243d856d34f8c07f3534613b39ed043b738.css><meta property="og:title" content="6_RA"><meta property="og:description" content="Do a web research about the various methods proposed to compute the running median"><meta property="og:url" content="https://www.matteobianchi.eu/p/6_ra/"><meta property="og:site_name" content="My personal blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="after"><meta property="article:tag" content="statistic"><meta property="article:published_time" content="2021-10-28T20:03:36+02:00"><meta property="article:modified_time" content="2021-10-28T20:03:36+02:00"><meta name=twitter:title content="6_RA"><meta name=twitter:description content="Do a web research about the various methods proposed to compute the running median"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu56620a3ab17cf40bf466466bc37f199d_303747_300x0_resize_box_3.png width=300 height=275 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>My personal blog</a></h1><h2 class=site-description>Il mio blog personale spero possa esserti utile.</h2></div></header><ol class=social-menu><li><a href=https://github.com/yuky2020 target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/playlist/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.828 9.172a4 4 0 100 5.656A10 10 0 0012 12a10 10 0 012.172-2.828 4 4 0 110 5.656A10 10 0 0112 12 10 10 0 009.828 9.172"/></svg><span>Playlist</span></a></li><li><a href=/about-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About me</span></a></li><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><li><a href=/page/uni_note/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>UNI_NOTES</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/statistic/>statistic</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/6_ra/>6_RA</a></h2><h3 class=article-subtitle>Do a web research about the various methods proposed to compute the running median</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Oct 28, 2021</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><p><img src=/images/1.jpg loading=lazy alt=header></p><h2 id=6_ra-assignament>6_RA assignament</h2><h3 id=request>Request</h3><p>Do a web research about the various methods proposed to compute the running median (one pass, online algorithms).
Store (cite all sources and attributions) the algorithm(s) that you think is(are) a good candidate, explaining briefly how it works and possibly try a quick demo.</p><h3 id=compute-it-with-one-pass>Compute it with one pass</h3><p>the median is the value that is at the center of the distribution and biscet it,for computing it we can use a simple algo:
Starting from a ordered distribution (cardinality n) whe could say that:</p><ul><li>if the number of value are odd we can take the value placed at (n+1)/2 as the median</li><li>if the number of value is even we take the two value in the middle (at index n/2 and n/2+1) and compute the mean between the two value as the median</li></ul><h3 id=how-to-calculate-it-with-an-oline-algo>how to calculate it with an oline algo</h3><p>we can approssimate the median with the formula: [1]
Me= Xi+(Xi+1 -Xi)=(0,5 -Fi)/(Fi+1-Fi)
where Fi are the acutual comulative frequency
and calculate it online with this</p><h3 id=efficient-algorithm-for-computing-a-running-median>Efficient Algorithm for computing a Running Median</h3><p>From -LIGO- LASER INTERFEROMETER GRAVITATIONAL WAVE OBSERVATORY[2]</p><p>Inputs to the code:
‚Ä¢ X : the sequence x[k], k = 0, . . . , N ‚àí 1.
‚Ä¢ M : The number of points per block.
Output of the code:
‚Ä¢ Y : sequence y[k], k = 0, . . . , N ‚àí M.</p><ul><li><p>1 Sort the first M samples x[k], k = 0, . . . , M ‚àí1, in ascending order. The ANSI C &lt;stdlib.h> library comes with
a routine for sorting called qsort which can be used for this first step. Let the sorted list, in ascending order, be
Z[k], k = 0, . . . , M ‚àí 1. Thus, Z[0] ‚â§ Z[1] ‚â§ Z[2] . . . ‚â§ Z[M ‚àí 1].</p></li><li><p>2 Load the sorted samples into the nodes of a linked list [6] with each node containing one sample. Each node of
the linked list has three types of links to other nodes.
Sequential link If the current node has sample x[p], then this link points to the node containing x[p + 1].
Next Sorted link If the current node has sample Z[p], then this link points to the node containing Z[p + 1].
Previous Sorted link If the current node has sample Z[p], then this link points to the node containing Z[p‚àí1].
In the qsort algorithm, the ordering of equal samples is arbitrary and so is it assumed here.</p></li><li><p>3 Set up an array, checks<input disabled type=checkbox> , of pointers to nodes of the linked list such that checks[n] points to the node
containing Z
h
n ‚àó floor ¬≥‚àö
M
¬¥i. The special nodes pointed to by elements of checks<input disabled type=checkbox> are called checkpoints
in the following. Further denote the samples contained in checkpoint p by C[p] = Z
h
p ‚àó floor ¬≥‚àö
M
¬¥i, p =
0, . . . , floor(‚àö
M) ‚àí 1.
Why are the checkpoints spaced ‚àö
M samples apart? Once one obtains a sorted block of M samples, the
sequentially next sample outside this block must be placed in the sorted list and the sequentially first sample
in the block must be deleted. This is done by first comparing the new sample sequentially against the samples
4
in checkpoints. Once the checkpoints that bracket the new sample are found, comparisons are made with only
the samples within this bracket to locate the exact position of the new sample in the sorted list. This implies
that in the worst case P comparison operations are needed, if P is the number of checkpoints used, to find the
bracketing checkpoints. After this one may have to make M/P further comparisons to locate the exact position
of the new sample in the ordered list. Thus the total operation count K, in the worst case, is
K = P + M/P . (2)
The value of P which minimises K is P =
‚àö
M. This is why checkpoints are spaced M/P = M/‚àö
M =
‚àö
M
samples apart in this algorithm.</p></li><li><p>4 Find the element n0 of checks<input disabled type=checkbox> such that the sample in the corresponding node is nearest to the node containing
the median (for M odd) or the first member of the pair which needs to be averaged (for M even). This element
will provide a fast access to the node containing the samples needed to compute the median. This is necessary
because we are dealing with a linked list and not an array that can be randomly accessed.</p></li><li><p>5 FOR j = M TO N ‚àí 1 DO</p><ul><li>(a) Get sample x[j].</li><li>(b) Locate the element pj of checks such that C[pj ] ‚â§ x[j] &lt; C[pj + 1].</li><li>(c) Start from the node checks[pj ] and follow the Next Sorted link until a node is found such that the sample
value h it contains satisfies x[j] ‚â§ h. We have thus found the exact place where the new sample x[j] must
be inserted.
The next few steps find out the checkpoints that are bracketed by x[j] and the sample to be deleted,
x[j ‚àí M]. When the corresponding nodes are respectively inserted and deleted from the list, the bracketed
checlpoints must be shifted to adjacent nodes.</li><li>(d) Consider the node containing the first element of the sequential list. That sample will be x[j ‚àí M].</li><li>(e) Find elements q and p of checks such that
i. If x[j ‚àí M] &lt; x[j]
x(j ‚àí M) &lt; C[q] &lt; . . . &lt; C[p] &lt; x[j]
ii. else if x[j ‚àí M] > x[j]
x[j] &lt; C[p + 1] &lt; . . . &lt; C[q] &lt; x[j ‚àí M].
iii. else if x[j ‚àí M] == x[j]
Do nothing. No shifting of checkpoints required since in this case all samples in the sorted list between
x[j] and x[j ‚àí M] must be equal to x[j] = x[j ‚àí M].</li><li>(f) Shift the checkpoints found in step 5e.
i. If x[j ‚àí M] &lt; x[j]
Shift each pointer checks[k], k ‚àà [q, p], to point to the next right node (i.e., higher in sorted order).
ii. Else
shift to the next left node.</li><li>(g) Delete node containing x[j ‚àí M] from the linked list (repair the links between the nodes adjacent to it).</li><li>(h) Rewrite the data in this node by x[j].</li><li>(i) Insert this node before the node containing h.</li><li>(j) Follow Next Sorted link from checks[n0] to get the median value.</li></ul></li><li><p>6 END DO</p></li></ul><p>Several special cases may arise such as x[j] smaller or larger than any of the sample from the previous block. A lot
of the code is devoted to handling such special cases.</p><p><img src=/p/6_ra/images/10.png width=587 height=439 srcset="/p/6_ra/images/10_hue2899cde299e3577fb8f2ab649e5c0f9_102841_480x0_resize_box_3.png 480w, /p/6_ra/images/10_hue2899cde299e3577fb8f2ab649e5c0f9_102841_1024x0_resize_box_3.png 1024w" loading=lazy alt="Median algo" class=gallery-image data-flex-grow=133 data-flex-basis=320px></p><p>[1]&ldquo;url&rdquo;,&ldquo;<a class=link href=https://dcc-backup.ligo.org/public/0027/T030168/000/T030168-00.pdf%22 target=_blank rel=noopener>https://dcc-backup.ligo.org/public/0027/T030168/000/T030168-00.pdf"</a>
[2]&ldquo;url&rdquo;,&ldquo;<a class=link href=https://it.wikipedia.org/wiki/Mediana_%28statistica%29#Definizione_e_calcolo%22 target=_blank rel=noopener>https://it.wikipedia.org/wiki/Mediana_(statistica)#Definizione_e_calcolo"</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/after/>after</a>
<a href=/tags/statistic/>statistic</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/12r/><div class=article-details><h2 class=article-title>12R</h2></div></a></article><article><a href=/p/8_ra/><div class=article-details><h2 class=article-title>8_RA</h2></div></a></article><article><a href=/p/10_r/><div class=article-details><h2 class=article-title>10_R</h2></div></a></article><article><a href=/p/11_r/><div class=article-details><h2 class=article-title>11_R</h2></div></a></article><article><a href=/p/9_ra/><div class=article-details><h2 class=article-title>9_RA</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//matteobianchi-eu.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 My personal blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.12.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>